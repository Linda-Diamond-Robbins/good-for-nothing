<h1>Good For Nothing...</h1>
<h1>Challenge ID:</h1> 
<h2><%= @challenge.id %></h2> 
<h1>Challenge Title:</h1> 
<h2><%= @challenge.title %></h2>
<p> <%= @challenge.description %></p>
<p>Public? <%= @challenge.public %></p>
<p>Created by user <%= @challenge.user_id %></p>


<% if current_user %>
  <%= form_tag "/user_challenges", method: :post do %>

    <div>
      <%= hidden_field_tag :challenge_id, @challenge.id %>
    </div>
    <div>
      <%= hidden_field_tag :title, @challenge.title %>
    </div>
    <div>
      <%= hidden_field_tag :description, @challenge.description %>
    </div>
    <div>
      <%= hidden_field_tag :user_id, current_user.id %>
    </div>
    <div>
      <%= hidden_field_tag :status, "Accepted" %>
    </div>   
    <div>
    <%= submit_tag "Accept Challenge!" %>
    </div>
  <% end %>
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Challenge A Friend
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Challenge A Friend!</h4>
      </div>
     <div class="modal-body">
        <%= form_for(@challenge_form, url: "/send-challenge", method: :post, html:{ id: "challenge-form"}) do |f| %>
          <%= f.hidden_field :nickname %>
          <div class="field">
            <%= f.hidden_field :name, value: current_user.name %>
          </div>
          <div class="field">
            <%= f.hidden_field :email, value: current_user.email %>
          </div>
          <div class="field">
            <%= f.label :name, "Who would you like to see do good? Enter their email to send this challenge!" %>
            <%= f.text_field :challengee_email, placeholder: "Email Address", required: true %>
          </div>
          <div class="form-group">
            <%= f.text_area :message, value: "Hey!\n\nYour friend #{current_user.name} challenged you to do some good.\n\nView your challenge at http://localhost:3000/challenges/#{@challenge.id} ", class: "form-control", size: "20x10" %>
          </div>
        <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg" data-dismiss="modal">Close</button>
        <button class="btn btn-lg" form="challenge-form">Good To Go</button>
      </div>
    </div>
  </div>
<% else %>
  <p>Please log in to accept this challenge! </p>
<% end %>  


