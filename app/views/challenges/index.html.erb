<div ng-app="app">
  <div ng-controller="challengesCtrl" ng-init="setup()">
  
  <h1 class="cursive-50 text-center">Challenges</h1>

      <% if current_user %>
        <div class="section dark-bg text-muted negative-margins">
          <div class="container">
            <h3>Don't see a challenge you like? Create your own!</h3>
            
            <%= form_for(@challenge) do |f| %>
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label">Title</label>
                    <%= f.text_field :title,class: "form-control" %>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label">Description</label>
                    <%= f.text_field :description, class: "form-control" %>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label">Categories</label>
                    <%= f.collection_select(:category_ids, Category.all, :id, :name, {}, {:prompt => 'Select Categories', class: "chosen-select", multiple: true 
                      }) %>
                  </div>
                </div>
              </div>
              <button type="submit" class="btn btn-gray">Submit</button>
            <% end %>
          </div>
        </div>
      <% else %>
        <p>Please log in to create a challenge! </p>
      <% end %>  

      <!-- main-container start -->
      <!-- ================ -->
      <section class="main-container">

        <div class="container">
          <div class="row">

            <!-- main start -->
            <!-- ================ -->
            <div class="main col-md-12">

              <!-- page-title start -->
              <!-- ================ -->
              <!-- <h1 class="page-title">Good. For Nothing</h1>
              <div class="separator-2"></div> -->
              <!-- page-title end -->
              <!-- <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit Illo quaerat <br> commodi excepturi dignissimos!</p> -->

              <!-- isotope filters start -->
              <div class="filters">
                <ul class="nav nav-pills">
                  <li class="active"><a href="#" data-filter="*">All</a></li>
                  <% @categories.each do |category| %>
                     <li><a href="#" data-filter=".<%= category.nospace_name %>"><%= category.name %></a></li>
                  <% end %>
                </ul>
              </div>
              <!-- isotope filters end -->

              <div class="isotope-container-fitrows row grid-space-10">
                  <div class="col-sm-6 col-md-4 isotope-item {{ challenge.category_list }}" ng-repeat="challenge in challenges | filter: challengeFilter" >
                    <div class="image-box style-2 mb-20 bordered dark-bg">
                      <div id="carousel-portfolio" class="carousel slide" data-ride="carousel">
                        <!-- Indicators -->
                        <ol class="carousel-indicators bottom margin-clear">
                          <li data-target="#carousel-portfolio" data-slide-to="0" class="active"></li>
                          <li data-target="#carousel-portfolio" data-slide-to="1"></li>
                          <li data-target="#carousel-portfolio" data-slide-to="2"></li>
                        </ol>

                        <!-- Wrapper for slides -->
                        <div class="carousel-inner" role="listbox">
                          <div class="item active">
                            <div class="overlay-container overlay-visible">
                              <img src="/images/portfolio-1.jpg" alt="">
                              <a href="portfolio-item.html" class="overlay-link"><i class="fa fa-link"></i></a>             
                            </div>
                          </div>
                          <div class="item">
                            <div class="overlay-container overlay-visible">
                              <img src="/images/portfolio-1-2.jpg" alt="">
                              <a href="portfolio-item.html" class="overlay-link"><i class="fa fa-link"></i></a>             
                            </div>
                          </div>
                          <div class="item">
                            <div class="overlay-container overlay-visible">
                              <img src="/images/portfolio-1-3.jpg" alt="">
                              <a href="portfolio-item.html" class="overlay-link"><i class="fa fa-link"></i></a>             
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <h3>{{ challenge.title }}</h3>
                        <div class="separator-2"></div>
                        <p class="small mb-10"><i class="icon-calendar"></i>{{ challenge.created_at }} <i class="pl-10 icon-tag-1"></i> Web Design</p>
                        <p class="text-muted">{{ challenge.description }}</p>
                        <a href="/challenges/{{ challenge.id }}" class="btn btn-gray-transparent btn-animated btn-sm margin-clear">Read More<i class="fa fa-arrow-right pl-10"></i></a>
                      </div>
                    </div>
                  </div>
              </div>

            </div>
            <!-- main end -->

          </div>
        </div>
      </section>
      <!-- main-container end -->
  </div>
</div>
      
<script>
  $(function(){
      $(".chosen-select").chosen();
  });

  $(document).ready(function(){
    $(".chosen-select").css("width", "100%");
  });      
</script>